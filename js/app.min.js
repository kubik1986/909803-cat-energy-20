"use strict";!function(){const e="main-nav--closed",t="main-nav--opened";window.MainNav=function(e){this._element=e,this._toggle=e.querySelector(".main-nav__toggle"),this._navToggleText=this._toggle.children[0],this._init()},window.MainNav.prototype={_init:function(){let i=this;i._element.classList.add(e),i._toggle.addEventListener("click",(function(){i._element.classList.contains(e)?(i._element.classList.remove(e),i._element.classList.add(t),i._navToggleText.textContent="Закрыть меню"):(i._element.classList.remove(t),i._element.classList.add(e),i._navToggleText.textContent="Открыть меню")}))}}}(),function(){const e=document.getElementById("map");if(e){const n={mobile:{zoom:15,center:[59.93881872632231,30.32312098938753],placemark:{size:[61,52],offset:[-30.5,-52]}},tablet:{zoom:15,center:[59.939740388660944,30.32312098938753],placemark:{size:[124,106],offset:[-62,-106]}},desktop:{zoom:16,center:[59.93910404662137,30.318854613016263],placemark:{size:[124,106],offset:[-62,-106]}}},o=[59.9385645248735,30.323183542781184];let s,l;const a=362,r=40;function t(){let t=document.documentElement.clientHeight;t<a+2*r?e.style.height=t-2*r+"px":e.hasAttribute("style")&&e.removeAttribute("style")}function i(e){let t=new ymaps.Placemark(o,{},{iconLayout:"default#image",iconImageHref:"img/map-pin.png",iconImageSize:n[l].placemark.size,iconImageOffset:n[l].placemark.offset});e.geoObjects.add(t)}ymaps.ready((function(){window.utils.isMobile&&t(),l=window.utils.getViewport(),s=new ymaps.Map("map",{center:n[l].center,zoom:n[l].zoom,controls:["zoomControl","fullscreenControl"]},{suppressMapOpenBlock:!0}),s.behaviors.disable(["scrollZoom"]),i(s)})),window.addEventListener("resize",(function(){!function(e){let o=window.utils.getViewport();window.utils.isMobile&&t(),o!==l&&(l=o,e.setZoom(n[l].zoom),e.panTo(n[l].center),e.geoObjects.removeAll(),i(e))}(s)}))}}(),function(){const e=0,t=100;window.Slider=function(t){this._element=t.sliderElement,this._scale=t.scale,this._grip=t.grip,this._input=t.input,this._buttons=t.buttons,this._cb=t.cb,this._minValue=t.minValue,this._maxValue=t.maxValue,this._value=t.minValue,this._gripPosition=e,this._valueStepByKeyPress=t.valueStepByKeyPressMultiplier*(this._maxValue-this._minValue),this._init()},window.Slider.prototype={_moveGrip:function(e){this._grip.style.left=e+"%",this._gripPosition=e},_init:function(){let e=this;e.reset(),e._grip.addEventListener("mousedown",e._onSwipeStart.bind(e)),e._grip.addEventListener("touchstart",e._onSwipeStart.bind(e)),e._grip.addEventListener("keydown",e._onGripKeyDown.bind(e)),e._buttons.forEach((function(t){t.addEventListener("click",e._onButtonClick.bind(e))}))},_updateValue:function(e){this._moveGrip(e);let t=Math.round(e/100*(this._maxValue-this._minValue)+this._minValue);this._value=t,this._input.value=t,this._cb(this._value)},_getEvent:function(){return-1!==event.type.search("touch")?event.touches[0]:event},_onSwipeStart:function(){let i=this,n=i._getEvent().clientX,o=(t-e)/i._scale.offsetWidth;i._grip.classList.add("slider__grip--grabbed"),i._clientXCoordinateLimit={min:i._scale.getBoundingClientRect().left,max:i._scale.getBoundingClientRect().left+i._scale.offsetWidth};const s=function(){let s=i._getEvent(),l=n-s.clientX;n=s.clientX;let a=Math.round(100*(i._gripPosition-l*o))/100;a<e?(a=e,n<i._clientXCoordinateLimit.min-pageXOffset&&(n=i._clientXCoordinateLimit.min-pageXOffset)):a>t&&(a=t,n>i._clientXCoordinateLimit.max-pageXOffset&&(n=i._clientXCoordinateLimit.max-pageXOffset)),i._updateValue(a)},l=function(){document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",l),document.removeEventListener("touchmove",s),document.removeEventListener("touchend",l),i._grip.classList.remove("slider__grip--grabbed"),i._grip.blur()};document.addEventListener("mousemove",s),document.addEventListener("mouseup",l),document.addEventListener("touchmove",s),document.addEventListener("touchend",l)},_onGripKeyDown:function(e){e.keyCode===window.utils.KeyCode.RIGHT_ARROW?this.setValue(this._value+this._valueStepByKeyPress):e.keyCode===window.utils.KeyCode.LEFT_ARROW&&this.setValue(this._value-this._valueStepByKeyPress)},_onButtonClick:function(e){e.preventDefault();let t=+e.target.dataset.sliderValue;this.setValue(t),e.target.blur()},setValue:function(e){if(e=parseInt(e,10),!isNaN(e)){e<this._minValue?e=this._minValue:e>this._maxValue&&(e=this._maxValue),this._value=Math.round(e),this._input.value=this._value;let t=Math.round((this._value-this._minValue)/(this._maxValue-this._minValue)*100*100)/100;this._moveGrip(t),this._cb(this._value)}},reset:function(){"mobile"==window.utils.getViewport()?this.setValue(this._minValue):this.setValue(Math.round((this._minValue+this._maxValue)/2))},getValue:function(){return this._value}}}(),function(){const e=0,t=100,i=.05;window.TwoImageSlider=function(n){this._upperImageBox=n.querySelector(".slider__img-wrapper--upper"),this._sliderElement=n.querySelector(".slider__controls"),this.slider=new window.Slider({sliderElement:this._sliderElement,scale:this._sliderElement.querySelector(".slider__inner-range"),grip:this._sliderElement.querySelector(".slider__grip"),input:this._sliderElement.querySelector(".slider__input"),buttons:this._sliderElement.querySelectorAll(".slider__btn"),minValue:e,maxValue:t,valueStepByKeyPressMultiplier:i,cb:this._setUpperImageWidth.bind(this)})},window.TwoImageSlider.prototype={_setUpperImageWidth:function(e){this._upperImageBox.style.width=e+"%"}}}(),function(){const e={ESC:27,ENTER:13,LEFT_ARROW:37,RIGHT_ARROW:39},t=768,i=1300;window.utils={KeyCode:e,isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),onEscPress:function(t,i){t.keyCode===e.ESC&&(t.preventDefault(),i())},getViewport:function(){let e,n=window.innerWidth;return e=n<t?"mobile":n>=t&&n<i?"tablet":"desktop",e}}}(),function(){let e,t=document.querySelector(".main-nav"),i=document.querySelector(".example__slider");new window.MainNav(t);i&&(e=new window.TwoImageSlider(i))}();